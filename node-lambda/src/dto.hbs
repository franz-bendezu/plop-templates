import  I{{pascalCase name}} from '../interface/{{kebabCase name}}.interface';

export default class {{pascalCase name}}DTO extends AuditDTO {

    constructor(
        public id: number,
        public name: string,
        public createdAt: Date,
        public modifiedAt: Date,
        public createdBy: string,
        public modifiedBy: string,
        {{#each modelProperties}}
        public {{name}}: {{type}},
        {{/each}}
    ) {
        super(createdAt, modifiedAt, createdBy, modifiedBy);
    }

    static from(params: I{{pascalCase name}}): {{pascalCase name}}DTO {
        // Transform data into DTO
        return new {{pascalCase name}}DTO(
            params.id,
            params.name,
            params.createdAt,
            params.modifiedAt,
            params.createdBy,
            params.modifiedBy,
            {{#each modelProperties}}
            params.{{name}},
            {{/each}}
        );
    }

    static fromBody(body: string | null): {{pascalCase name}}DTO {
        if (!body) {
            throw new RuntimeError({
                statusMessage: 'Body is required',
                statusCode: StatusCodes.BAD_REQUEST,
            });
        }

        const data = JSON.parse(body);

        const { error, value } = {{camelCase name}}Schema.validate(data);
        if (error) {
            throw new RuntimeError({
                statusMessage: error.message,
                statusCode: StatusCodes.BAD_REQUEST,
            });
        }

        return new {{pascalCase name}}DTO(
            value.id,
            value.name,
            value.createdAt,
            value.modifiedAt,
            value.createdBy,
            value.modifiedBy,
            {{#each modelProperties}}
            value.{{name}},
            {{/each}}
        );
    }
}