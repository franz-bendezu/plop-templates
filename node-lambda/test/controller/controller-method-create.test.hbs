$<imports>
import I{{pascalCase name}} from '../../../src/{{kebabCase moduleName}}/interface/{{kebabCase name}}.interface';
import I{{pascalCase name}}ResultRow from '../../../src/{{kebabCase moduleName}}/interface/{{kebabCase name}}-query-result.interface';
import {{pascalCase name}} from '../../../src/{{kebabCase moduleName}}/model/{{kebabCase name}}.model';
import IBase{{pascalCase name}} from '../../../src/{{kebabCase moduleName}}/interface/base-{{kebabCase name}}.interface';
import Base{{pascalCase name}}DTO from '../../../src/{{kebabCase moduleName}}/dto/base-{{kebabCase name}}.dto';
import {{pascalCase name}}DTO from '../../../src/{{kebabCase moduleName}}/dto/{{kebabCase name}}.dto';$<code>$<tests>
    it('should create and return a {{pascalCase name}}DTO', async () => {
        const inputData = new Base{{pascalCase name}}DTO(
            'test name',
            'test description',
            '2023-01-01',
            '2023-01-31',
        );
        const created{{pascalCase name}} = new {{pascalCase name}}(
            1,
            'test name',
            'test description',
            new Date('2023-01-01'),
            new Date('2023-01-31'),
            new Date(),
            new Date(),
            'test-user',
            'test-user',
        );

        {{camelCase name}}Service.save.mockResolvedValue(created{{pascalCase name}});

        const result = await {{camelCase name}}Controller.save(inputData);

        const expected{{pascalCase name}} = new Base{{pascalCase name}}(
            'test name',
            'test description',
            new Date('2023-01-01'),
            new Date('2023-01-31'),
        );

        expect({{camelCase name}}Service.save).toHaveBeenCalledWith(expected{{pascalCase name}});

        expect(result).toBeInstanceOf({{pascalCase name}}DTO);

        const expected{{pascalCase name}}DTO = new {{pascalCase name}}DTO(
            1,
            'test name',
            'test description',
            '2023-01-01',
            '2023-01-31',
            'test-user',
            'test-user',
        );

        expect(result).toEqual(expected{{pascalCase name}}DTO);
    });


    it('should handle service errors', async () => {
        const inputData = new Base{{pascalCase name}}DTO(
            'test name',
            'test description',
            '2023-01-01',
            '2023-01-31',
        );
        const errorMessage = 'Failed to create {{pascalCase name}}';
        {{camelCase name}}Service.save.mockRejectedValue(new Error(errorMessage));

        await expect({{camelCase name}}Controller.save(inputData)).rejects.toThrow(errorMessage);
    });